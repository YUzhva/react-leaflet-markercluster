"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}}(),_reactLeaflet=require("react-leaflet"),_leaflet=require("leaflet"),_leaflet2=_interopRequireDefault(_leaflet);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}require("leaflet.markercluster"),_leaflet2.default.MarkerClusterGroup.include({_layerCache:[],_commitLayerCache:function(){this.addLayers(this._layerCache),this._layerCache=[]},addLayer:function(e){0===this._layerCache.length&&setTimeout(this._commitLayerCache.bind(this),50),this._layerCache.push(e)}});var MarkerClusterGroup=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,_reactLeaflet.MapLayer),_createClass(t,[{key:"createLeafletElement",value:function(e){e.children;var t=e.leaflet.map,r=_objectWithoutProperties(e,["children","leaflet"]),n={},o={};Object.entries(r).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],a=t[1];return r.startsWith("on")?o[r]=a:n[r]=a});var i=new _leaflet2.default.markerClusterGroup(n);return this.contextValue={layerContainer:i,map:t},Object.entries(o).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],a=t[1],n="cluster"+r.substring(2).toLowerCase();i.on(n,a)}),i}}]),t}();exports.default=(0,_reactLeaflet.withLeaflet)(MarkerClusterGroup);